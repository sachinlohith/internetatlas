<!DOCTYPE html>
<html>
  <head>
    <style>
       #map {
            height: 735px;
            width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>Internet Atlas</h3>
    <div id="map"></div>
    <script>
      function initMap() {
          var markers = [];
          var map;
          $.getJSON('./geocoded.json', function(data) {
              var uluru = {lat: data[120]["geocode"][0], lng: data[120]["geocode"][1]};
              map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 5,
                  center: uluru
              });
              jQuery.each(data, function(i, val) {
                  uluru = {lat: data[i]["geocode"][0], lng: data[i]["geocode"][1]};
                  var marker = new google.maps.Marker({
                      position: uluru,
                      map: map
                  });
                  markers.push(marker); 
              });
              $.get('./InterTubes-Dataset/links.txt', function(data) {
                  data = data.split("\n");
                  jQuery.each(data, function(i, val) {
                      if(data[i]) {
                          var line = data[i].split(",");
                          line = [parseInt(line[0]), parseInt(line[1])];
                          var link = [markers[line[0]].getPosition(), markers[line[1]].getPosition()];
                          var flightPath = new google.maps.Polyline({
                              path: link,
                              strokeColor: '#0000FF'
                          });
                          flightPath.setMap(map);
                      }
                  });
              });
          });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6S8qL6b6A6IIAIIQaVgUJF7Bk9iV0JXc&callback=initMap">
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  </body>
</html>
